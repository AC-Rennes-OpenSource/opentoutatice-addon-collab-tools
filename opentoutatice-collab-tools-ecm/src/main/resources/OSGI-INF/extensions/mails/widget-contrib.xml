<?xml version="1.0"?>
<component name="fr.toutatice.ecm.collab.tools.mails.widgets">

    <require>org.nuxeo.ecm.platform.forms.layout.WebLayoutManager</require>
    <require>org.nuxeo.ecm.platform.forms.layout.MainContribution</require>
    <require>fr.toutatice.ecm.platform.web.widgets</require>
    <require>fr.toutatice.ecm.platform.web.contextualization.widgets</require>


    <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
        point="widgettypes">
	
        <widgetType name="emailRecipients">
            <configuration>
                <title>Choose email recipients from LDAP</title>
                <supportedModes>
                    <mode>edit</mode>
                </supportedModes>
                <fields>
                    <list>true</list>
                    <complex>false</complex>
                    <supportedTypes>
                        <type>string</type>
                    </supportedTypes>
                </fields>
                <categories>
                    <category>document</category>
                </categories>
                <properties>
                    <defaultValues mode="edit">
                        <property name="minChars">3</property>
                        <property name="width">100%</property>
                    </defaultValues>
                    <layouts mode="edit">
                        <layout name="multipleUsersSuggestion_widget_type_properties_edit">
                            <rows>
                                <row>
                                    <widget category="widgetTypeConf">required</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">placeholder</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">suggestion_width</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">suggestion_minChars</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">suggestion_orderable</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">userSuggestionSearchType</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">userSuggestion_groupRestriction
                                    </widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">userSuggestion_prefixed</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">userSuggestionMaxSearchResults
                                    </widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">ajaxReRender</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">userSuggestion_displayEmailInSuggestion
                                    </widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">suggestion_helpLabel</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">suggestion_hideHelpLabel</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">select2_containerCssClass</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">select2_dropdownCssClass</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">select2_inlinejs</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">select2_selectionFormatter</widget>
                                </row>
                                <row>
                                    <widget category="widgetTypeConf">select2_suggestionFormatter</widget>
                                </row>
                            </rows>
                        </layout>
                    </layouts>
                </properties>
            </configuration>
            <handler-class>
                org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
            </handler-class>
            <property name="template">
                /widgets/toutatice_email_recipients_widget_template.xhtml
            </property>
        </widgetType>

    </extension>


</component>
