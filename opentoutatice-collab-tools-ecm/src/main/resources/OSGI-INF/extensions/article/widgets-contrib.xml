<?xml version="1.0"?>
<component name="fr.toutatice.ecm.platform.web.article.widgets">

	<require>org.nuxeo.ecm.platform.forms.layout.WebLayoutManager</require>
	<require>fr.toutatice.ecm.platform.web.widgets</require>

	<extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
		point="widgets">

		<widget name="article_title" type="text">
			<labels>
				<label mode="any">toutatice.label.title</label>
			</labels>
			<translated>true</translated>
			<fields>
				<field>dc:title</field>
			</fields>
			<properties widgetMode="edit">
				<property name="styleClass">dataInputText</property>
				<property name="required">true</property>
				<property name="disabled">false</property>
			</properties>
		</widget>

		<widget name="article_extrait" type="ottc_extract_htmltext">
			<labels>
				<label mode="any">toutatice.label.extract</label>
			</labels>
			<helpLabels>
				<label mode="any">Les extraits sont des résumés facultatifs de vos
					articles, écrits à la main.
				</label>
			</helpLabels>
			<translated>true</translated>
			<fields>
				<field>annonce:resume</field>
			</fields>
		</widget>
		
		<widget name="article_extrait_summary" type="summary_content_type">
			<labels>
				<label mode="view">toutatice.label.extract</label>
			</labels>
			<helpLabels>
				<label mode="view">Les extraits sont des résumés facultatifs de vos
					articles, écrits à la main.
				</label>
			</helpLabels>
			<translated>true</translated>
			<fields>
				<field>annonce:resume</field>
				<field>annonce:resume_mime_type</field>
			</fields>
			<properties widgetMode="view">
				<property name="cssClass">note_content_block</property>
			</properties>
		</widget>

		<widget name="article_content" type="ottc_htmltext">
			<labels>
				<label mode="any">toutatice.label.content</label>
			</labels>
			<translated>true</translated>
			<fields>
				<field>note:note</field>
				<field>note:mime_type</field>
			</fields>
		</widget>
		
		<widget name="article_content_summary" type="summary_content_type">
			<labels>
				<label mode="view">toutatice.label.content</label>
			</labels>
			<translated>true</translated>
			<fields>
				<field>note:note</field>
				<field>note:mime_type</field>
			</fields>
			<properties mode="view">
				<property name="cssClass">note_content_block</property>
			</properties>
		</widget>

		<widget name="article_image" type="file">
			<labels>
				<label mode="any">toutatice.label.article.header.picture</label>
			</labels>
			<helpLabels>
				<label mode="any">Déposez une image pour illustrer votre annonce.
				</label>
			</helpLabels>
			<translated>true</translated>
			<fields>
				<field>annonce:image</field>
				<field>annonce:image/filename</field>
			</fields>
			<properties widgetMode="edit">
				<property name="required">false</property>
				<property name="iconRendered">false</property>
			</properties>
			<properties widgetMode="view">
				<property name="template">/widgets/toutatice_image_widget.xhtml
				</property>
			</properties>
		</widget>
		
		<widget name="article_image_summary" type="summary_picture_type">
			<labels>
				<label mode="any">toutatice.label.article.header.picture</label>
			</labels>
			<helpLabels>
				<label mode="any">Déposez une image pour illustrer votre annonce.
				</label>
			</helpLabels>
			<translated>true</translated>
			<fields>
				<field>annonce:image</field>
				<field>annonce:image/filename</field>
			</fields>
		</widget>



		<widget name="article_folder_title" type="text">
			<labels>
				<label mode="any">toutatice.label.article.folder.titleTitre du bulletin d'articles</label>
			</labels>
			<translated>false</translated>
			<fields>
				<field>dc:title</field>
			</fields>
			<properties widgetMode="edit">
				<property name="styleClass">dataInputText</property>
				<property name="required">true</property>
				<property name="disabled">false</property>
			</properties>
		</widget>

		<widget name="article_folder_title" type="text">
			<labels>
				<label mode="any">toutatice.label.article.folder.title</label>
			</labels>
			<translated>true</translated>
			<fields>
				<field>dc:title</field>
			</fields>
			<properties widgetMode="edit">
				<property name="styleClass">dataInputText</property>
				<property name="required">true</property>
				<property name="disabled">false</property>
			</properties>
		</widget>

	</extension>

	<extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
		point="widgettypes">

		<widgetType name="ottc_extract_htmltext">
			<aliases>
				<alias>richtext_with_mimetype</alias>
				<alias>htmltext</alias>
				<!-- For 4.6 compatibility 
				<alias>ttc_richtext_with_mimetype</alias>-->
			</aliases>
			<configuration>
				<title>HTML text</title>
				<description>
					<p>Pre-configured Nx htmltext</p>
				</description>
				<categories>
					<category>document</category>
				</categories>
				<supportedModes>
					<mode>edit</mode>
					<mode>view</mode>
				</supportedModes>
				<fields>
					<list>false</list>
					<complex>false</complex>
					<supportedTypes>
						<type>string</type>
					</supportedTypes>
				</fields>
				<properties>
					<defaultValues mode="any">
						<property name="configuration">{"height": "150","width": "100%","theme" : "modern","plugins" : "nuxeolink link textcolor","content_css": "/nuxeo/css/portal-view.min.css? + new Date().getTime()","valid_elements": "strong/b,em,sub,u,p[style],ol,ul,li,blockquote,span[style],a[href]","valid_styles": {"p": "text-align,padding-left","span": "text-decoration,color,background-color"},"relative_urls" : true,"document_base_url" : "/nuxeo","toolbar1" : "bold italic underline | strikethrough subscript | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent blockquote | forecolor backcolor | nuxeolink link unlink","toolbar2":"", "toolbar3":"","menubar": false,"statusbar": false,"gecko_spellcheck" : true}</property>
					</defaultValues>
				</properties>
			</configuration>
			<handler-class>
				org.nuxeo.ecm.platform.forms.layout.facelets.plugins.HtmlTextWidgetTypeHandler
			</handler-class>
		</widgetType>

</extension>

</component>